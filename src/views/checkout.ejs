<!DOCTYPE html>
<html lang="en">
  <head>
	<title>Checkout Page</title>
	<%- include ('./partials/head.ejs') %> 

	<!-- Load Stripe.js on your website. -->
	<script src="https://js.stripe.com/v3/" defer></script>
	<link rel="stylesheet" href="/css/checkout.css">
	<script src="/js/client.js" defer></script>
  </head>

<body>
	<header>
		<%- include ('./partials/header.ejs') %> 
	</header>

	<main>
		<!-- PASSWORD CONFIRMATION MODAL -->
		<%- include ('./partials/password-confirmation.ejs') %> 

		<!-- ASK THE SELLER MODAL -->
		<%- include ('./partials/ask-the-seller.ejs') %> 


		<!-- Item info STARTS -->
		<section class="main-box container-fluid my-3 mx-auto" id=<%= item.priceId %>>

			<!-- LEFT COL STARTS -->
			<div class="left-container p-3">
				<div class="left-upper">
					<!-- CAROUSAL STARTS -->
					<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
						<div class="carousel-inner">
							<div class="carousel-item active">
								<img src=<%= itemImagesPaths[0] %> class="carousal-images d-block" alt>
							</div>
							<% for( let i=1; i < itemImagesPaths.length; i++ ) { %>
								<div class="carousel-item">
									<img src=<%= itemImagesPaths[i] %> class="carousal-images d-block" alt>
								</div>
							<% } %>
						</div>
						<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
							<span class="carousel-control-prev-icon" aria-hidden="true"></span>
							<span class="sr-only">Previous</span>
						</a>
						<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
							<span class="carousel-control-next-icon" aria-hidden="true"></span>
							<span class="sr-only">Next</span>
						</a>
					</div>
					<!-- CAROUSAL ENDS -->
	
					<div class="item-sidebar">
						<div class="saves my-1 p-2" title="Save to wishlist">
							<img src="/images/save.svg" alt width="24" height="24">
						</div>
						<div class="clipboard my-1 p-2" id="<%= item._id %>" title="Copy to clipboard">
							<img src="/images/clipboard.svg" alt width="24" height="24">
						</div>

					</div>
				</div>
				

				<!-- INFO BOX STARTS -->
				<div class="left-lower">
					<h1 id="item-name" class="display-5"><%= item.name %> </h1>
					<p class="item-desc"><%= item.description %> </p>
					<p class="item-desc">Condition: <%= item.condition %> <small> out of 5</small> </p>
					<input type="hidden" id="_csrf" name="_csrf" value="<%= locals.csrfToken %>">
					<input type="hidden" id="item_id" value=<%= item._id %>>
					<!-- This also acts as modal button -->
					<div class="buttons">
						<button id="modalToggleBtn" class="btn btn-secondary mr-2" data-toggle="modal" data-target="#myModal">Buy for â‚¹<%= item.price %></button>
						<button class="btn btn-info" data-toggle="modal" data-target="#ats-modal">Ask the Seller</button>
					</div>
				</div>
				<!-- INFO BOX ENDS -->

			</div>
			<!-- LEFT COL ENDS -->

			<!-- RIGHT COL STARTS -->
			<div class="right-container p-3">
				<!-- SELLER INFO STARTS -->
				<div class="seller-info mb-5">
					<h5 class="heading">Seller Info</h5>
					<div id="seller-info-body">
						<div id="seller-avatar">
							<% sellerAvatar = seller.picture ? seller.picture : '/images/avatar.svg' %> 
							<img src="<%= sellerAvatar %>" alt width="50" height="50">
						</div>
						<div id="seller-name" class="ml-2">
							<p class="lead mb-0 d-inline-block"><%= seller.name %> </p>
 							<span><small>( Online )</small></span>
							<% starsCount = seller.stars ? (seller.stars === 0 ? 'New Seller' : `${seller.stars} stars`) : 'New Seller' %> 
							<small class="d-block"><%= starsCount %> </small>
						</div>
					</div>
				</div>
				<!-- SELLER INFO ENDS -->

				<!-- FAQS STARTS -->
				<div class="faqs mt-4">
					<h5 class="heading">Frequently Asked Questions</h5>
					<div class="accordion" id="accordionExample">
						<div class="card">
							<div class="card-header" id="headingOne">
								<button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
									How would the post-purchase process looks like?
								</button>
							</div>
							  
							<div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
								<div class="card-body">
									That's not a problem. I'll send you the package to your doorstep through speed post. You just need to give me your shipping address in the mail post-purchase ðŸ˜ƒ.
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- FAQS ENDS -->
			</div>
			<!-- RIGHT COL ENDS -->

		</section>
		<!-- Item info ENDS -->
	</main>
	
	<footer>
		<%- include ('./partials/footer') %> 
	</footer>
  </body>
</html>
